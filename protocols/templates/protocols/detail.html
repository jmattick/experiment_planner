{% include "./header.html" %}
    <div id = "details" class = "main">
        <div class = "white-background">
        <h1>{{protocol.name}}</h1>

        <p>{{protocol.description}}</p>

        <table class="white-background">
            <tr>
                <th><strong>Step</strong></th>
                <th><strong>Minutes</strong></th>
                <th><strong>Days between steps</strong></th>
                <th><strong>Days from start</strong></th>
                <th><strong>Gap Tolerance? (Days) </strong></th>
            </tr>
            {% for step in protocol.step_set.all %}
                <tr>
                    <td class = "text-left">{{step.step_text}}</td>
                    <td>{{step.time_min}}</td>
                    {% if step.type == "TDS" %}
                        <td>--</td>
                        <td>{{step.days_between}}</td>
                    {% else %}
                        <td>{{step.days_between}}</td>
                        <td>--</td>
                    {% endif %}
                    <td>{{step.gap_days}}</td>
                </tr>
                {% for feature in step.feature_set.all %}
                    <tr>
                        <td></td>
                        <td>{{feature.name}} + '\n' + {{feature.details}}</td>
                        <td></td>
                    </tr>
                {% endfor %}
            {% endfor %}

        </table>
        <div id = "dag_viz" width=100%></div>
        <h2>DAG:</h2>
        <div>
            {% for node in protocol.dag %}
                <p>{{node}}</p>
            {% endfor %}
        </div>
        </div>
    </div>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://unpkg.com/d3-dag@0.2.3"></script>
<script>


</script>

{% include "./footer.html" %}